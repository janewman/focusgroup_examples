<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scoped Focusgroup Examples</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Scoped Focusgroup: Interactive Examples</h1>
    <p>
      This page demonstrates the ideas in the Open UI
      <a href="https://open-ui.org/components/scoped-focusgroup.explainer/" target="_blank" rel="noopener">Scoped Focusgroup explainer</a>.
      It includes interactive widgets that rely on the browser’s native <code>focusgroup</code> implementation for directional focus.
    </p>
  </header>

  <main>
    <details class="toc" aria-label="Examples navigation" open>
      <summary>Quick Navigation</summary>
      <ul class="list-reset" focusgroup="menu block" aria-label="Table of contents">
        <li><a href="#basic-list-title">Basic Toolbar</a></li>
        <li><a href="#vertical-list-title">Vertical Menu</a></li>
        <li><a href="#wrapping-title">Wrapping Tablist</a></li>
        <li><a href="#nested-title">Nested Focusgroups</a></li>
        <li><a href="#optout-title">Opt-out Barriers</a></li>
        <li><a href="#readingflow-title">Reading-Flow Navigation</a></li>
        <li><a href="#radiogroup-title">Radiogroup</a></li>
        <li><a href="#shadow-title">Shadow DOM Participation</a></li>
        <li><a href="#memory-title">Memory vs Entry Priority</a></li>
        <li><a href="#inference-title">Role Inference</a></li>
        <li><a href="#menubar-title">Menubar + Popovers</a></li>
        <li><a href="#descendants-title">Descendant Navigation</a></li>
        <li><a href="#backward-title">Backward Navigation</a></li>
      </ul>
    </details>
    <section aria-labelledby="intro-title">
      <h2 id="intro-title">What is a Focusgroup?</h2>
      <p>
        A focusgroup is a scope within the DOM where keyboard focus travels predictably among items using arrow keys and other controls.
        Typical patterns include menus, tablists, toolbars, and radiogroups. These examples use the <code>focusgroup</code> attribute directly and do not include a polyfill.
      </p>
      <p class="muted">
        Note: The feature may be behind experimental flags or under active development; behavior depends on your browser’s implementation.
      </p>
    </section>

    <section aria-labelledby="memory-title" class="example">
      <h2 id="memory-title">Example 1: Memory vs Entry Priority</h2>
      <p>Focus memory takes precedence over entry priority unless <code>no-memory</code> is set.</p>
      <div focusgroup="toolbar inline" aria-label="Memory demo">
        <button>First</button>
        <button focusgroup-entry-priority>Entry Priority</button>
        <button>Last</button>
      </div>
      <details class="explain">
        <summary>Try this</summary>
        <ul>
          <li>Tab into the group: focus goes to “Entry Priority”.</li>
          <li>Use arrows to move to “Last”, then Tab away and Shift+Tab back: focus restores to “Last”.</li>
          <li>Change to <code>focusgroup="toolbar inline no-memory"</code> to always enter via “Entry Priority”.</li>
        </ul>
        <pre><code>&lt;div focusgroup="toolbar inline" aria-label="Memory demo"&gt;
  &lt;button&gt;First&lt;/button&gt;
  &lt;button focusgroup-entry-priority&gt;Entry Priority&lt;/button&gt;
  &lt;button&gt;Last&lt;/button&gt;
&lt;/div&gt;</code></pre>
      </details>
    </section>

    <section aria-labelledby="inference-title" class="example">
      <h2 id="inference-title">Example 2: Role Inference (Mixed)</h2>
      <p>Behavior tokens can map a minimum role and infer child roles when compatible and not explicit.</p>
      <div id="inference-demo" focusgroup="menu inline wrap" aria-label="Formatting">
        <div tabindex=0 focusgroup-entry-priority>Bold</div>
        <button role="menuitemcheckbox" aria-checked="true">Italic</button>
        <div tabindex=0 >Underline</div>
      </div>
    </section>

    
    <section aria-labelledby="descendants-title" class="example">
      <h2 id="descendants-title">Example 3: Descendant Navigation</h2>
      <p>Arrow keys navigate focusable descendants even when nested in non-focusable wrappers.</p>
      <div focusgroup="toolbar inline" aria-label="Nested wrappers">
        <div>
          <span><button>Alpha</button></span>
          <span><button>Beta</button></span>
          <span><button>Gamma</button></span>
        </div>
      </div>
    </section>

    <section aria-labelledby="backward-title" class="example">
      <h2 id="backward-title">Example 4: Backward Navigation</h2>
      <p>Use Shift+Tab to enter the previous segment and observe memory vs entry-priority.</p>
      <p class="muted">Tip: Try this in the “Opt-out Barriers” example above to see segment selection on Shift+Tab.</p>
    </section>

    <section aria-labelledby="basic-list-title" class="example">
      <h2 id="basic-list-title">Example 5: Basic Horizontal List (Toolbar)</h2>
      <p>
        Arrow keys move focus left/right within the group; Tab exits the group.
      </p>
      <div focusgroup="toolbar inline" aria-label="Text formatting">
        <button type="button">Bold</button>
        <button type="button">Italic</button>
        <button type="button">Underline</button>
        <button type="button">Strike</button>
      </div>
    </section>

    <section aria-labelledby="vertical-list-title" class="example">
      <h2 id="vertical-list-title">Example 6: Vertical List (Menu)</h2>
      <p>Use Up/Down arrows to move.</p>
      <div focusgroup="menu block" aria-label="File actions">
        <div class="item" tabindex="0">New</div>
        <div class="item" tabindex="0">Open…</div>
        <div class="item" tabindex="0">Save</div>
        <div class="item" tabindex="0">Exit</div>
      </div>
    
    </section>

    <section aria-labelledby="wrapping-title" class="example">
      <h2 id="wrapping-title">Example 7: Wrapping Tablist</h2>
      <p>Arrow keys wrap from end to start and vice versa.</p>
      <div focusgroup="tablist inline wrap no-memory" aria-label="Sections">
        <button role="tab" type="button" aria-selected="true" focusgroup-entry-priority>Overview</button>
        <button role="tab" type="button" aria-selected="false">Specs</button>
        <button role="tab" type="button" aria-selected="false">Examples</button>
        <button role="tab" type="button" aria-selected="false">FAQ</button>
      </div>
     
    </section>

    <section aria-labelledby="nested-title" class="example">
      <h2 id="nested-title">Example 8: Nested Focusgroups</h2>
      <p>Main toolbar with a nested formatting toolbar; each is independent.</p>
      <div focusgroup="toolbar inline" aria-label="Main toolbar">
        <button type="button">Save</button>
        <button type="button" focusgroup-entry-priority>Print</button>

        <div class="card">
          <h3>Formatting</h3>
          <div focusgroup="toolbar inline wrap" aria-label="Text formatting">
            <button type="button">Bold</button>
            <button type="button" focusgroup-entry-priority>Italic</button>
            <button type="button">Underline</button>
          </div>
        </div>

        <button type="button">Close</button>
        <button type="button" focusgroup-entry-priority>Exit</button>
      </div>
    </section>

    <section aria-labelledby="optout-title" class="example">
      <h2 id="optout-title">Example 9: Opt-out Barriers</h2>
      <p>Subtrees with <code>focusgroup="none"</code> split the focusgroup into segments for Tab/Shift+Tab; arrow keys skip them.</p>
      <div focusgroup="toolbar inline wrap" aria-label="Document toolbar">
        <button>New</button>
        <button focusgroup-entry-priority>Open</button>
        <button>Save</button>

        <span focusgroup="none" aria-label="Help section">
          <button>Help</button>
          <button>Shortcuts</button>
        </span>

        <button>Close</button>
        <button focusgroup-entry-priority>Exit</button>
      </div>
    </section>

    <section aria-labelledby="readingflow-title" class="example">
      <h2 id="readingflow-title">Example 10: Reading-Flow Navigation</h2>
      <p>When supported, arrow keys follow visual order established by <em>reading-flow</em> or explicit visual reordering.</p>
      <div focusgroup="toolbar" aria-label="Visual order toolbar" class="visual-reorder" style="reading-flow:flex-visual;">
        <button>A</button>
        <button>B</button>
        <button>C</button>
      </div>
    </section>

    <section aria-labelledby="radiogroup-title" class="example">
      <h2 id="radiogroup-title">Example 11: Radiogroup (Navigation Only)</h2>
      <p>Directional focus is decoupled from selection; arrow keys move among radios without changing state here.</p>
      <div focusgroup="radiogroup inline" aria-label="Text alignment">
        <button role="radio" aria-checked="true">Left</button>
        <button role="radio" aria-checked="false">Center</button>
        <button role="radio" aria-checked="false">Right</button>
      </div>
    </section>
  </main>

  <footer>
    <p>Built for demonstration only; not a reccomendation</p>
  </footer>
  <script src="scripts.js"></script>
</body>
</html>
